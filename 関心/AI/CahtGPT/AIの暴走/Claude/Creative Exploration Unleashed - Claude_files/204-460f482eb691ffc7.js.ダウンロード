"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[204,8322],{68259:function(e,t,a){a.d(t,{Dv:function(){return r},Y0:function(){return c},by:function(){return o}});var s=a(5362),n=a(27218),i=a(13262),l=a(77930);function r(){var e;let t=(0,n.t)();return(0,s.WE)("/api/account/deletion-allowed",{queryKey:[i.gs,null==t?void 0:null===(e=t.account)||void 0===e?void 0:e.uuid],staleTime:0})}function o(e){return(0,s.WE)("/api/account_profile",{queryKey:[i.ec],...e})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.useQueryClient)();return(0,s.uC)("/api/account_profile","PUT",{...e,onSuccess:(a,s,n)=>{var l;t.invalidateQueries({queryKey:[i.ec]}),null===(l=e.onSuccess)||void 0===l||l.call(e,a,s,n)}})}},7160:function(e,t,a){a.d(t,{Hd:function(){return h},Hn:function(){return g},Ky:function(){return f},L1:function(){return d},Um:function(){return v},ZX:function(){return u},pf:function(){return m},rC:function(){return x},zZ:function(){return p}});var s=a(5362),n=a(27218),i=a(13262),l=a(87033),r=a(77930),o=a(7653);let c="artifact_view_cache",d=e=>{let{activeOrganization:t}=(0,n.t)(),a=null==t?void 0:t.uuid,{value:r}=(0,l.FL)("publish_artifacts"),c=new URLSearchParams;e&&"includeDeletedArtifacts"in e&&c.append("include_deleted_artifacts",String(e.includeDeletedArtifacts));let d=(0,s.WE)("/api/organizations/".concat(a,"/published_artifacts?").concat(c.toString()),{staleTime:0,queryKey:[i.sB,{orgUuid:a}],enabled:r}),u=(0,o.useMemo)(()=>{var e;return null===(e=d.data)||void 0===e?void 0:e.reduce((e,t)=>(e[t.message_uuid]||(e[t.message_uuid]=[]),e[t.message_uuid].push(t),e),{})},[d.data]);return{...d,publishedArtifactsByMessageUuid:u}},u=()=>{let{activeOrganization:e}=(0,n.t)(),t=null==e?void 0:e.uuid,a=(0,r.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(t,"/publish_artifact"),"POST",{onSuccess:()=>{a.invalidateQueries({queryKey:[i.sB,{orgUuid:t}]})}})},x=e=>{let{activeOrganization:t}=(0,n.t)(),a=null==t?void 0:t.uuid,l=(0,r.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(a,"/published_artifacts/").concat(e),"DELETE",{onSuccess:()=>{l.invalidateQueries({queryKey:[i.sB,{orgUuid:a}]})},enabled:!!e})},m=()=>{let{activeOrganization:e}=(0,n.t)(),t=null==e?void 0:e.uuid;return(0,s.WE)("/api/organizations/".concat(t,"/artifact_feedback_eligibility"),{queryKey:[i.Wj],meta:{noToast:!0}})},f=e=>{let{activeOrganization:t}=(0,n.t)(),a=null==t?void 0:t.uuid,l=(0,r.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(a,"/artifact-versions/").concat(e,"/visibility"),"POST",{onSuccess:()=>{l.invalidateQueries({queryKey:[i.x5,{artifactVersionUuid:e,orgUuid:a}]})}})},h=e=>{let{activeOrganization:t}=(0,n.t)(),a=null==t?void 0:t.uuid,l=(0,r.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(a,"/artifacts/").concat(e,"/byindex"),"POST",{onSuccess:e=>{l.invalidateQueries({queryKey:[i.x5,{artifactVersionUuid:e.artifactVersionUUID,orgUuid:a}]})}})},g=e=>{let{activeOrganization:t}=(0,n.t)(),a=null==t?void 0:t.uuid;return(0,s.WE)("/api/organizations/".concat(a,"/artifact-versions/").concat(e,"/visibility"),{queryKey:[i.x5,{artifactVersionUuid:e,orgUuid:a}],enabled:!!e,meta:{noToast:!0}})},p=(e,t)=>{let a=(0,s.uC)("/api/published_artifacts/".concat(e,"/record_view"),"POST",{onSuccess:a=>{"view successfully recorded"===a.status&&function(e,t){if(!t)return;let a="".concat(t,"_").concat(e);try{let e=localStorage.getItem(c)||"{}",t=JSON.parse(e),s=t[a];if(s&&Date.now()-s<36e5)return;(t=function(e){let t=Date.now(),a={};for(let[s,n]of Object.entries(e))t-n<=36e5&&(a[s]=n);return a}(t))[a]=Date.now(),localStorage.setItem(c,JSON.stringify(t))}catch(e){}}(e,t)},meta:{noToast:!0}});return{...a,mutate:s=>{!function(e,t){if(!t)return!1;let a="".concat(t,"_").concat(e);try{let e=localStorage.getItem(c);if(!e)return!1;let t=JSON.parse(e),s=t[a];if(!s)return!1;if(Date.now()-s>36e5)return delete t[a],localStorage.setItem(c,JSON.stringify(t)),!1;return!0}catch(e){return!1}}(e,t)&&a.mutate(s||{})}}},v=e=>{let t=new URLSearchParams;e.forEach(e=>{t.append("artifact_uuids",e)});let a="/api/published_artifacts/view_counts?".concat(t.toString());return(0,s.WE)(a,{queryKey:[i.EF,e],meta:{noToast:!0},enabled:e.length>0})}},36502:function(e,t,a){a.d(t,{Q:function(){return r},Z:function(){return o}});var s=a(5362),n=a(27218),i=a(13262),l=a(77930);let r=()=>{let{account:e,activeOrganization:t}=(0,n.t)();return(0,s.WE)("/api/organizations/".concat(null==t?void 0:t.uuid,"/spotlight"),{enabled:!!e,queryKey:[i.Nr,null==e?void 0:e.uuid,null==t?void 0:t.uuid]})},o=()=>{let{account:e,activeOrganization:t}=(0,n.t)(),a=(0,l.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(null==t?void 0:t.uuid,"/spotlight/action"),"POST",{enabled:!!e,onSuccess:()=>{a.invalidateQueries({queryKey:[i.Nr,null==e?void 0:e.uuid,null==t?void 0:t.uuid]})}})}},51786:function(e,t,a){a.d(t,{H:function(){return d},k:function(){return c}});var s=a(27218),n=a(66894),i=a(87033),l=a(58183),r=a(7653),o=a(41270);function c(){let{client:e}=(0,l.useStatsigClient)(),t=(0,s.Cf)();return!!(0,n.Ry)()||!t&&e.getExperiment("artifacts_gallery").get("enabled",!1)}function d(){let e=(0,i.Zr)("gallery_artifacts_config","original_to_localized_artifact_ids",(0,r.useMemo)(()=>({}),[]),o.z.record(o.z.string()));return 0===Object.keys(e).length?null:{original_to_localized_artifact_ids:e}}},35102:function(e,t,a){a.d(t,{i7:function(){return n}});var s=a(87033);(0,a(7653).createContext)({enabled:!1,isActive:!1,orgUuid:""});let n=()=>(0,s.FL)("claudeai_tiny_pancakes").value},51866:function(e,t,a){a.d(t,{p:function(){return p}});var s=a(27573),n=a(28803),i=a(45033),l=a(7653),r=a(45790),o=a(5984),c=a(70354),d=a(52939),u=a(40950);function x(e){let{isOpen:t,onClose:a,initialName:i,conversationUUID:x}=e,m=(0,u.Z)(),{mutate:f,isPending:h}=(0,n.W)(x),[g,p]=(0,l.useState)(i);return(0,s.jsx)(d.u_,{isOpen:t,onClose:a,title:m.formatMessage({defaultMessage:"Rename chat",id:"Oi9LAY6C5H"}),children:(0,s.jsxs)("form",{className:"grid gap-2",onSubmit:e=>{e.preventDefault(),f({name:g}),a()},children:[(0,s.jsx)(o.oi,{"data-testid":"name-chat",autoFocus:!0,className:"mt-3",value:g,onChange:e=>p(e.target.value)}),(0,s.jsxs)(d.dm,{children:[(0,s.jsx)(c.z,{"data-testid":"name-chat-submit",type:"submit",disabled:h,children:(0,s.jsx)(r.Z,{defaultMessage:"Save",id:"jvo0vs3nF0"})}),(0,s.jsx)(c.z,{variant:"secondary",type:"button",onClick:a,disabled:h,children:(0,s.jsx)(r.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})})}var m=a(81695);let f=()=>{let e=(0,m.useRouter)(),t=(0,m.useSearchParams)(),a=(0,l.useMemo)(()=>{let e=new URLSearchParams;(null==t?void 0:t.has("model"))&&e.append("model",t.get("model")),(null==t?void 0:t.has("max_tokens"))&&e.append("max_tokens",t.get("max_tokens")),(null==t?void 0:t.has("speak"))&&e.append("speak",t.get("speak")),(null==t?void 0:t.has("t"))&&e.append("t",t.get("t")),(null==t?void 0:t.has("q"))&&e.append("q",t.get("q"));let a=e.toString();return a?"?".concat(a):""},[t]);return{push:(0,l.useCallback)(t=>e.push("".concat(t).concat(a)),[e,a]),replace:(0,l.useCallback)(t=>e.replace("".concat(t).concat(a)),[e,a])}};var h=a(7160);function g(e){let{isOpen:t,onClose:a,conversationUUID:i}=e,{data:l,isLoading:o}=(0,h.L1)({includeDeletedArtifacts:!1}),{mutate:u}=(0,n.j1)(),x=(0,m.usePathname)(),g=f();return(0,s.jsxs)(d.u_,{title:(0,s.jsx)(r.Z,{defaultMessage:"Delete chat?",id:"M16o5rLckO"}),isOpen:t,onClose:a,children:[(0,s.jsx)("div",{className:"mt-1 mb-2",children:(()=>{let e=null==l?void 0:l.filter(e=>e.chat_conversation_uuid===i).map(e=>e.title);return e&&0!==e.length?(0,s.jsxs)("div",{children:[(0,s.jsx)(r.Z,{defaultMessage:"When you delete this chat, youâ€™ll also delete the published artifacts in this chat.",id:"+r05Hpg92t"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("ul",{className:"list-disc pl-5",children:e.map(e=>(0,s.jsx)("li",{children:e},e))})})]}):(0,s.jsx)(r.Z,{defaultMessage:"Are you sure you want to delete this chat?",id:"eoF+zSJr4t"})})()}),(0,s.jsxs)(d.dm,{children:[(0,s.jsx)(c.z,{variant:"danger","data-testid":"delete-modal-confirm",onClick:()=>{u({uuid:i}),a(),x==="/chat/".concat(i)&&g.push("/new")},disabled:o,children:(0,s.jsx)(r.Z,{defaultMessage:"Delete",id:"K3r6DQW7h+"})}),(0,s.jsx)(c.z,{variant:"secondary",onClick:a,children:(0,s.jsx)(r.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})}let p=e=>{let{conversation:t,initialName:a,open:o,onOpenChange:c,trigger:d}=e,[u,m]=(0,l.useState)(!1),[f,h]=(0,l.useState)(!1),{mutate:p}=(0,n.Gk)(t.uuid),v=()=>{p({is_starred:!t.is_starred})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Lt,{align:"end",open:o,onOpenChange:c,trigger:d,unstyledTrigger:!0,children:(0,s.jsxs)("div",{children:[(0,s.jsx)(i.hP,{"data-testid":"star-chat-trigger",onSelect:()=>{v(),null==c||c(!1)},children:t.is_starred?(0,s.jsx)(r.Z,{defaultMessage:"Unstar",id:"Y5zRLWgCMP"}):(0,s.jsx)(r.Z,{defaultMessage:"Star",id:"VwapsmdMes"})}),(0,s.jsx)(i.u2,{}),(0,s.jsx)(i.hP,{"data-testid":"rename-chat-trigger",onSelect:()=>{m(!0),null==c||c(!1)},children:(0,s.jsx)(r.Z,{defaultMessage:"Rename",id:"iXNbPfQDIZ"})}),(0,s.jsx)(i.hP,{danger:!0,"data-testid":"delete-chat-trigger",onSelect:()=>{h(!0),null==c||c(!1)},children:(0,s.jsx)(r.Z,{defaultMessage:"Delete",id:"K3r6DQW7h+"})})]})}),(0,s.jsx)(g,{isOpen:f,onClose:()=>h(!1),conversationUUID:t.uuid}),(0,s.jsx)(x,{conversationUUID:t.uuid,isOpen:u,initialName:a,onClose:()=>m(!1)})]})}},64791:function(e,t,a){a.d(t,{j:function(){return v}});var s=a(27573),n=a(27218),i=a(70354),l=a(45033),r=a(77003),o=a(7653),c=a(45790),d=a(18187),u=a(32559),x=a(27895),m=a(52939),f=a(40950);function h(e){let{isOpen:t,onClose:a,project:n}=e,{addError:l}=(0,x.e)(),r=(0,f.Z)(),{mutateAsync:o}=(0,u.dY)(n.uuid),d=async()=>{try{await o({is_archived:!0}),a()}catch(e){l(r.formatMessage({defaultMessage:"Could not archive",id:"3O1N877xLt"}))}};return(0,s.jsxs)(m.u_,{isOpen:t,onClose:a,modalSize:"md",children:[(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsx)("h2",{className:"font-styrene-display text-xl font-medium",children:(0,s.jsx)(c.Z,{defaultMessage:"Archive project",id:"sxTTUDY6HD"})})}),(0,s.jsx)("div",{className:"mb-6 mt-3",children:(0,s.jsx)(c.Z,{defaultMessage:"Are you sure you want to archive <strong>{projectName}</strong>?",id:"le3xsYo+U6",values:{strong:e=>(0,s.jsx)("strong",{className:"font-medium",children:e}),projectName:n.name}})}),(0,s.jsxs)("div",{className:"mt-2 flex justify-end gap-2",children:[(0,s.jsx)(i.z,{variant:"secondary",onClick:a,children:(0,s.jsx)(c.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,s.jsx)(i.z,{variant:"danger",onClick:()=>{d()},children:(0,s.jsx)(c.Z,{defaultMessage:"Yes, archive",id:"wWN1otYIK8"})})]})]})}var g=a(5984);function p(e){let{isOpen:t,onClose:a,project:n}=e,[l,r]=(0,o.useState)(n.name),[d,h]=(0,o.useState)(n.description),p=(0,f.Z)(),{addError:v}=(0,x.e)(),{mutateAsync:j}=(0,u.dY)(n.uuid),y=async()=>{try{await j({name:l,description:d}),a()}catch(e){v(p.formatMessage({defaultMessage:"Error updating project, please try again later",id:"eLzspFmHkT"}))}};return(0,s.jsxs)(m.u_,{isOpen:t,onClose:a,modalSize:"md",children:[(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsx)("h2",{className:"font-styrene-display text-xl font-medium",children:(0,s.jsx)(c.Z,{defaultMessage:"Edit details",id:"BVWzJ5FL/Y"})})}),(0,s.jsxs)("div",{className:"mb-6 mt-3",children:[(0,s.jsx)(g.oi,{className:"mb-4 w-full",label:p.formatMessage({defaultMessage:"Name",id:"HAlOn1ZsuY"}),value:l,onChange:e=>r(e.target.value),required:!0}),(0,s.jsx)(g.Kx,{label:p.formatMessage({defaultMessage:"Description",id:"Q8Qw5BZ1VA"}),value:d,onChange:e=>h(e.target.value),minRows:6,required:!0,className:"max-h-60 overflow-auto"})]}),(0,s.jsxs)("div",{className:"mt-2 flex justify-end gap-2",children:[(0,s.jsx)(i.z,{variant:"secondary",onClick:a,children:(0,s.jsx)(c.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,s.jsx)(i.z,{onClick:()=>{y()},children:(0,s.jsx)(c.Z,{defaultMessage:"Save",id:"jvo0vs3nF0"})})]})]})}let v=e=>{var t;let{star:a=!0,project:x,iconSize:m=16,buttonSize:f="icon_sm",open:g,onOpenChange:v}=e,[j,y]=(0,o.useState)(!1),[b,C]=(0,o.useState)(!1),{mutate:N}=(0,u.dY)(x.uuid),w=null!==x.archived_at,{account:_}=(0,n.t)(),{data:M}=(0,d.SE)(x.uuid),k=null!==(t=null==M?void 0:M.some(e=>e.account.uuid===(null==_?void 0:_.uuid)&&"user"===e.role))&&void 0!==t&&t;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Lt,{align:"end",open:g,onOpenChange:v,trigger:(0,s.jsx)(i.z,{variant:"ghost",className:"active:!scale-100 pointer-events-auto",size:f,onClick:e=>{e.stopPropagation(),e.preventDefault()},onMouseDown:e=>{e.stopPropagation(),e.preventDefault()},children:(0,s.jsx)(r.x,{weight:"bold",size:m})}),unstyledTrigger:!0,children:(0,s.jsxs)("div",{children:[a&&(0,s.jsx)(l.hP,{"data-testid":"star-project-trigger",onSelect:()=>{N({is_starred:!x.is_starred})},children:x.is_starred?(0,s.jsx)(c.Z,{defaultMessage:"Unstar",id:"Y5zRLWgCMP"}):(0,s.jsx)(c.Z,{defaultMessage:"Star",id:"VwapsmdMes"})}),a&&k&&(0,s.jsx)(l.u2,{}),k&&(0,s.jsxs)(s.Fragment,{children:[!w&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.hP,{"data-testid":"rename-project-trigger",onSelect:()=>y(!0),children:(0,s.jsx)(c.Z,{defaultMessage:"Edit details",id:"BVWzJ5FL/Y"})}),(0,s.jsx)(l.hP,{danger:!0,"data-testid":"archive-project-trigger",onSelect:()=>C(!0),children:(0,s.jsx)(c.Z,{defaultMessage:"Archive",id:"hrgo+EleAn"})})]}),w&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.u2,{}),(0,s.jsx)(l.hP,{className:"text-danger-000",onClick:()=>{N({is_archived:!1})},children:(0,s.jsx)(c.Z,{defaultMessage:"Unarchive",id:"ftDYZo4V2C"})})]})]})]})}),(0,s.jsx)(p,{isOpen:j,onClose:()=>y(!1),project:x}),(0,s.jsx)(h,{isOpen:b,onClose:()=>C(!1),project:x})]})}},80204:function(e,t,a){a.d(t,{c:function(){return eU},u:function(){return eD}});var s=a(27573),n=a(27218);a(87924);var i=a(11579),l=a(70354),r=a(32737),o=a(36667),c=a(26244);let d=e=>{let{size:t}=e;return(0,s.jsxs)(c.A,{size:t,className:"group",children:[(0,s.jsx)("path",{className:"group-hover:-translate-x-[0.5px] transition group-active:translate-x-0",fillRule:"evenodd",clipRule:"evenodd",d:"M9 2C5.96243 2 3.5 4.46243 3.5 7.5C3.5 8.66827 3.86369 9.75009 4.48403 10.6404C4.6225 10.8391 4.59862 11.1085 4.42735 11.2798L2.70711 13H9C12.0376 13 14.5 10.5376 14.5 7.5C14.5 4.46243 12.0376 2 9 2ZM2.5 7.5C2.5 3.91015 5.41015 1 9 1C12.5898 1 15.5 3.91015 15.5 7.5C15.5 11.0899 12.5898 14 9 14H1.5C1.29777 14 1.11545 13.8782 1.03806 13.6913C0.960669 13.5045 1.00345 13.2894 1.14645 13.1464L3.43405 10.8588C2.84122 9.87838 2.5 8.72844 2.5 7.5Z"}),(0,s.jsx)("path",{className:"group-hover:translate-x-[0.5px] transition group-active:translate-x-0",fillRule:"evenodd",clipRule:"evenodd",d:"M16.2996 9.64015C16.5527 9.52951 16.8474 9.64493 16.9581 9.89794C17.0204 10.0405 17.0778 10.1857 17.13 10.3334C17.3698 11.0117 17.5 11.7412 17.5 12.5C17.5 13.7284 17.1588 14.8784 16.5659 15.8588L18.8535 18.1464C18.9965 18.2894 19.0393 18.5045 18.9619 18.6913C18.8845 18.8782 18.7022 19 18.5 19H11C8.59344 19 6.493 17.6919 5.36988 15.7504C5.23161 15.5113 5.31329 15.2055 5.55232 15.0672C5.79135 14.9289 6.09721 15.0106 6.23548 15.2496C7.18721 16.8949 8.96484 18 11 18H17.2929L15.5726 16.2798C15.4014 16.1085 15.3775 15.8391 15.516 15.6404C16.1363 14.7501 16.5 13.6683 16.5 12.5C16.5 11.8563 16.3896 11.2394 16.1872 10.6666C16.143 10.5418 16.0946 10.4191 16.0419 10.2986C15.9312 10.0456 16.0466 9.75079 16.2996 9.64015Z"})]})},u=e=>{let{size:t}=e;return(0,s.jsxs)(c.A,{size:t,className:"group",children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.65937 7.70267C1.53655 6.80203 2.23664 6 3.14561 6H16.8544C17.7634 6 18.4634 6.80203 18.3406 7.70267L17.1134 16.7027C17.012 17.4459 16.3772 18 15.6271 18H4.37289C3.62278 18 2.98799 17.4459 2.88664 16.7027L1.65937 7.70267ZM3.14561 7C2.84262 7 2.60926 7.26734 2.6502 7.56756L3.87747 16.5676C3.91125 16.8153 4.12285 17 4.37289 17H15.6271C15.8771 17 16.0887 16.8153 16.1225 16.5676L17.3498 7.56756C17.3907 7.26734 17.1574 7 16.8544 7H3.14561Z"}),(0,s.jsx)("path",{className:"group-hover:-translate-y-[0.5px] transition group-active:translate-y-0",fillRule:"evenodd",clipRule:"evenodd",d:"M3 4.5C3 4.22386 3.22386 4 3.5 4H16.5C16.7761 4 17 4.22386 17 4.5C17 4.77614 16.7761 5 16.5 5H3.5C3.22386 5 3 4.77614 3 4.5Z"}),(0,s.jsx)("path",{className:"group-hover:-translate-y-px transition group-active:translate-y-0",fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 2.5C4.5 2.22386 4.72386 2 5 2H15C15.2761 2 15.5 2.22386 15.5 2.5C15.5 2.77614 15.2761 3 15 3H5C4.72386 3 4.5 2.77614 4.5 2.5Z"})]})};var x=a(1133),m=a(85069),f=a(87033),h=a(88755),g=a(96346),p=a(10607),v=a(68425),j=a(50294),y=a(88146),b=a(7653),C=a(40950),N=a(45790);a(62983);var w=a(95622),_=a(81695),M=a(15281),k=a(52939),S=a(15662),Z=a(91217);let z=e=>{let{isOpen:t,onClose:a}=e,{account:i}=(0,n.t)(),l=(0,M.w)();return((0,b.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&(e.preventDefault(),a())};return t&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,a]),i)?(0,s.jsx)(k.u_,{isOpen:t,onClose:a,modalSize:"xl",backgroundColor:"bg-transparent",className:"!shadow-none border-none !p-0",children:(0,s.jsx)(Z.x,{willRedirectOnSubmit:!0,onCreate:async e=>(a(),await l(e)),children:(0,s.jsx)(S.x,{placement:"modal"})})}):null},E=e=>{let{openNewChatModal:t}=e,a=(0,_.useRouter)(),s=(0,_.usePathname)(),{value:n}=(0,f.FL)("new_chat_modal"),i=(0,b.useCallback)(()=>{"/new"!==s&&(n?t():a.push("/new"))},[t,a,n,s]);return(0,w.H9)(w.LT.cmdK,i),(0,b.useEffect)(()=>{let e=e=>{var t;let a=(0,x.V5)()?e.metaKey:e.ctrlKey;(null===(t=e.key)||void 0===t?void 0:t.toLowerCase())==="k"&&a&&(e.preventDefault(),i())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i]),null},P=()=>{let[e,t]=(0,b.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E,{openNewChatModal:()=>t(!0)}),(0,s.jsx)(z,{isOpen:e,onClose:()=>t(!1)})]})};var O=a(95586),T=a(51786),I=a(35102),L=a(19170),R=a(80151),A=a(61284);let D=(0,b.forwardRef)((e,t)=>{let{trigger:a,children:n,disableTrigger:i=!1,side:l="bottom",align:r="center",alignOffset:o,sideOffset:c,closeButton:d="none",className:u,triggerClassName:x,onCloseButtonClick:m}=e,[f,h]=(0,b.useState)(!1);return(0,b.useImperativeHandle)(t,()=>({open:()=>h(!0),close:()=>h(!1)})),(0,s.jsxs)(A.fC,{open:f,onOpenChange:i?void 0:e=>{h(e)},children:[(0,s.jsx)(A.xz,{asChild:!0,className:x,children:"function"==typeof a?a(f):a}),(0,s.jsx)(A.h_,{children:(0,s.jsxs)(A.VY,{side:l,align:r,alignOffset:o,sideOffset:c,collisionPadding:16,className:(0,p.Z)("bg-bg-000 p-2 shadow-[0px_0px_32px_0px_hsl(var(--accent-main-900)/12%)] rounded-xl max-w-[16rem] relative outline-none z-tooltip",u),children:["none"!==d&&(0,s.jsx)(A.x8,{onClick:m,className:(0,p.Z)({"absolute top-2 right-2 translate-x-1 -translate-y-1 bg-bg-000 p-1 rounded-md":"absolute"===d,"float-right":"wrap"===d}),children:(0,s.jsx)(R.X,{size:16,className:"opacity-80 hover:opacity-100 transition-opacity duration-200"})}),n,(0,s.jsx)(A.Eh,{className:"fill-bg-000 drop-shadow-lg",height:8,width:16})]})})]})});D.displayName="Popover";var U=a(45356),F=a(36502);let W=(0,b.forwardRef)((e,t)=>{var a;let{popoverKey:i,autoShowOnMount:l=!0,children:r,...o}=e,{account:c}=(0,n.t)(),{mutate:d}=(0,L.Ck)(),u=(0,_.useSearchParams)(),{data:x,isLoading:m}=(0,F.Q)(),f=(0,b.useRef)(null),h="marketing-popover-".concat(i),g=!!(!c||(0,U.U9)(c.email_address))||"true"!==u.get("debug_".concat(i))&&((null===(a=c.settings)||void 0===a?void 0:a.dismissed_claudeai_banners)||[]).some(e=>e.banner_id===h),p=()=>{var e;(null==c?void 0:c.settings)&&d({...c.settings,dismissed_claudeai_banners:[...c.settings.dismissed_claudeai_banners||[],{banner_id:h,dismissed_at:new Date().toISOString()}]}),null===(e=f.current)||void 0===e||e.close()},v=()=>{if(!g){var e;null===(e=f.current)||void 0===e||e.open()}};return(0,b.useImperativeHandle)(t,()=>({close:p,openIfNotSeen:v})),(0,b.useEffect)(()=>{m||!l||(null==x?void 0:x.spotlight)||v()},[m]),(0,s.jsx)(D,{ref:f,disableTrigger:!0,onCloseButtonClick:p,...o,children:r})});W.displayName="MarketingPopover";var K=a(41596),H=a(8322),Q=a(3053),Y=a(8571),q=a(20823),V=a(9788),B=a(69069),J=a(45033),G=a(7992),X=a(37141),$=a(82780),ee=a(85689),et=a(7533),ea=a(21520),es=a.n(ea),en=a(20355),ei=a(83617),el=a(72358),er=a(66894),eo=a(68259);let ec={type:"language",languageDisplay:"standard"},ed=(0,b.forwardRef)((e,t)=>{let a=(0,C.Z)(),{isPending:n,mutateAsync:i}=(0,eo.Y0)(),l=a.locale,r=async e=>{e!==l&&(await i({locale:e}),window.location.reload())},o=(0,b.useMemo)(()=>{let e=a.formatters.getDisplayNames(el.ZW,ec),t=new Intl.Collator(el.ZW);return el.Yr.map(t=>({locale:t,name:e.of(t),localName:a.formatters.getDisplayNames(t,ec).of(t)})).toSorted((e,a)=>t.compare(e.name,a.name))},[a.formatters]);return(0,s.jsxs)(J.Vy,{children:[(0,s.jsxs)(J.WR,{ref:t,className:"text-sm",children:[(0,s.jsxs)("span",{children:[(0,s.jsx)(N.Z,{defaultMessage:"Language",id:"y1Z3orIe9Z"}),(0,s.jsx)("span",{className:"inline-block",children:(0,s.jsx)(ei.C,{className:"mb-0.5 ml-2",uppercase:!0,children:(0,s.jsx)(N.Z,{defaultMessage:"Beta",id:"riw/yc06Nq"})})})]}),(0,s.jsx)(X.T,{size:16})]}),(0,s.jsx)(J.nI,{children:(0,s.jsxs)(J.A2,{sideOffset:4,children:[o.map(e=>(0,s.jsxs)(J.hP,{onSelect:()=>r(e.locale),disabled:n,lang:e.locale,children:[(0,s.jsx)("div",{className:"flex items-center gap-2 pr-4 text-sm capitalize",children:e.localName}),e.locale===l?(0,s.jsx)(ee.J,{size:16}):(0,s.jsx)("div",{className:"h-4 w-4"})]},e.locale)),(0,er.Ry)()&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(J.u2,{}),Object.keys(el.GN).map(e=>(0,s.jsxs)(J.hP,{onSelect:()=>r(e),disabled:n,lang:"en",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 pr-4 text-sm capitalize",children:el.GN[e].name}),e===l?(0,s.jsx)(ee.J,{size:16}):(0,s.jsx)("div",{className:"h-4 w-4"})]},e))]})]})})]})});ed.displayName="LanguagePicker";var eu=a(48410),ex=a(98649);let em=()=>{let{selectedTier:e,setSelectedTier:t,isTierSelectorEnabled:a,shouldOverrideTokenLimits:n,setShouldOverrideTokenLimits:i,shouldOverrideFeatureAccess:l,setShouldOverrideFeatureAccess:r}=(0,eu.i)();if(!a)return null;let o=[{tier:ex.kQ.FREE,label:(0,s.jsx)(N.Z,{defaultMessage:"Claude Free",id:"HALZF/VbRH"})},{tier:ex.kQ.PRO,label:(0,s.jsx)(N.Z,{defaultMessage:"Claude Pro",id:"SIgPaVikdi"})},{tier:ex.kQ.ENTERPRISE,label:(0,s.jsx)(N.Z,{defaultMessage:"Claude Enterprise",id:"MwY0j6lAfZ"})},{tier:ex.kQ.MAX,label:(0,s.jsx)(N.Z,{defaultMessage:"Claude Max",id:"PEXDsCWhYl"})}];return(0,s.jsxs)(J.Vy,{children:[(0,s.jsxs)(J.WR,{className:"text-sm",children:[(0,s.jsx)(N.Z,{defaultMessage:"Override plan tier",id:"M2Y2OeFN2P"}),(0,s.jsx)(X.T,{size:16})]}),(0,s.jsx)(J.nI,{children:(0,s.jsxs)(J.A2,{sideOffset:4,children:[o.map(a=>(0,s.jsx)(J.hP,{onSelect:()=>t(a.tier),className:"text-sm",children:(0,s.jsxs)("span",{className:"flex items-center justify-between w-full gap-2",children:[a.label,e===a.tier&&(0,s.jsx)(ee.J,{weight:"bold",className:"text-accent-secondary-100 h-4 w-4"})]})},a.tier)),(0,s.jsx)(J.u2,{}),(0,s.jsx)(J.hP,{onSelect:()=>t(null),className:"text-sm",children:(0,s.jsxs)("span",{className:"flex items-center justify-between w-full gap-2",children:[(0,s.jsx)(N.Z,{defaultMessage:"Unset for 30 days",id:"mZ78YiYBvg"}),null===e&&(0,s.jsx)(ee.J,{weight:"bold",className:"text-accent-secondary-100 h-4 w-4"})]})}),(0,s.jsx)(J.u2,{}),(0,s.jsx)(J.hP,{onSelect:()=>i(!n),className:"text-sm",children:(0,s.jsxs)("span",{className:"flex items-center justify-between w-full gap-2",children:[(0,s.jsx)(N.Z,{defaultMessage:"Apply other token limits",id:"enUY20BInl"}),n&&(0,s.jsx)(ee.J,{weight:"bold",className:"text-accent-secondary-100 h-4 w-4"})]})}),(0,s.jsx)(J.hP,{onSelect:()=>r(!l),className:"text-sm",children:(0,s.jsxs)("span",{className:"flex items-center justify-between w-full gap-2",children:[(0,s.jsx)(N.Z,{defaultMessage:"Apply feature access limits",id:"oyFNH6jKBM"}),l&&(0,s.jsx)(ee.J,{weight:"bold",className:"text-accent-secondary-100 h-4 w-4"})]})})]})})]})};function ef(){let e=(0,K._)(["fixed top-2.5 right-3.5 z-10 flex flex-row items-center gap-2"]);return ef=function(){return e},e}let eh=()=>(0,s.jsx)(G.O,{size:16,className:"ml-2 -mr-2"});function eg(e){let{trigger:t,matchTriggerWidth:a=!0,onOpenChange:i,className:r}=e,o=(0,C.Z)(),{track:c}=(0,Q.z$)(),{account:d}=(0,n.t)(),u=null==d?void 0:d.memberships.map(e=>e.organization),m=null==u?void 0:u.some(e=>e.capabilities.includes("api")),v=(0,Y.mX)(),{value:j}=(0,f.FL)("claude_ai_cumin"),{value:b}=(0,f.FL)("claude_ai_intercom"),w=(0,q.o)(),{value:M}=(0,f.FL)("claude_max_enabled"),{value:k}=(0,f.FL)("show_claude_desktop_download_link"),S=(0,h.Q)(),Z=((0,x.V5)()||(0,x.ED)())&&!S&&k,{closeSidebarOnMobile:z}=(0,en.S)(),E=(0,_.useRouter)(),P=(0,s.jsxs)(l.z,{variant:"unstyled",size:"unset",className:"border-0.5 border-border-300 hover:border-border-200 group relative z-[1] w-full overflow-hidden rounded-lg !px-2.5 !py-2 !text-left","data-testid":"user-menu-button",children:[(0,s.jsx)("div",{className:"from-bg-500/0 to-bg-500/40 absolute inset-0 bg-gradient-to-b opacity-70 transition-opacity group-hover:opacity-100"}),(0,s.jsxs)("div",{className:"relative z-[5] flex w-full items-center gap-1.5",children:[(0,s.jsx)(B.M,{size:"sm"}),(0,s.jsx)("div",{className:"min-w-0 flex-1 truncate text-sm",children:null==d?void 0:d.email_address}),(0,s.jsx)(g.p,{size:12})]})]});return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(J.Lt,{matchTriggerWidth:a,align:"end",unstyledTrigger:!0,trigger:t||P,onOpenChange:e=>{null==i||i(e)},className:(0,p.Z)("w-72",r),children:[(0,s.jsx)(ep,{}),(0,s.jsx)(J.u2,{}),(0,s.jsx)(J.hP,{asChild:!0,"data-testid":"user-menu-settings",children:(0,s.jsx)("button",{onClick:()=>{E.push("/settings/profile"),z()},className:"text-sm text-left block w-full",children:(0,s.jsx)(N.Z,{defaultMessage:"Settings",id:"D3idYvSLF9"})})}),j&&(0,s.jsx)(J.hP,{asChild:!0,children:(0,s.jsx)(ed,{})}),b&&w&&(0,s.jsx)(J.hP,{onSelect:()=>{c({event_key:"claudeai.get_help.clicked"}),w.update({hideDefaultLauncher:!1}),w.show()},className:"text-sm intercom-launcher",children:(0,s.jsx)(N.Z,{defaultMessage:"Get help",id:"9OuUCLqQgd"})}),(0,s.jsx)(em,{}),(0,s.jsx)(J.u2,{}),M&&(0,s.jsx)(J.hP,{asChild:!0,children:(0,s.jsx)(y.default,{href:"/upgrade",className:"text-sm",children:(0,s.jsx)(N.Z,{defaultMessage:"View all plans",id:"hSNxZTzZks"})})}),Z&&(0,s.jsx)(J.hP,{asChild:!0,className:"pr-0",children:(0,s.jsx)(y.default,{href:"https://claude.ai/download",target:"_blank",className:"text-sm",children:(0,s.jsxs)("span",{className:"flex items-center justify-between w-full",children:[(0,x.V5)()?(0,s.jsx)(N.Z,{defaultMessage:"Download Claude for Mac",id:"BobP7MV3sG"}):(0,s.jsx)(N.Z,{defaultMessage:"Download Claude for Windows",id:"qZjfHa3uMI"}),(0,s.jsx)(G.O,{size:16})]})})}),(0,s.jsxs)(J.Vy,{children:[(0,s.jsxs)(J.WR,{className:"text-sm",children:[(0,s.jsx)(N.Z,{defaultMessage:"Learn more",id:"TdTXXf940t"}),"\xa0",(0,s.jsx)(X.T,{size:16})]}),(0,s.jsx)(J.nI,{children:(0,s.jsxs)(J.A2,{sideOffset:4,children:[m&&(0,s.jsx)(J.hP,{asChild:!0,children:(0,s.jsx)(y.default,{href:v.consoleAbsoluteUrl,target:"_blank",className:"text-sm",children:(0,s.jsxs)("span",{className:"flex items-center justify-between w-full",children:[(0,s.jsx)(N.Z,{defaultMessage:"API Console",id:"CfiNwKIPP1"}),(0,s.jsx)(eh,{})]})})}),(0,s.jsx)(ey,{name:o.formatMessage({defaultMessage:"About Anthropic",id:"Cm+OGj8nZs"}),path:"/"}),(0,s.jsx)(J.u2,{}),(0,s.jsx)(ey,{name:o.formatMessage({defaultMessage:"Usage policy",id:"2hfc4AKs6b"}),path:"/legal/aup"}),(0,s.jsx)(ey,{name:o.formatMessage({defaultMessage:"Privacy policy",id:"cPwv2cbzf2"}),path:"/legal/privacy"})]})})]}),(0,s.jsx)(J.u2,{}),"",(0,s.jsx)(J.hP,{asChild:!0,children:(0,s.jsx)(y.default,{href:"/logout",className:"text-sm",children:(0,s.jsx)("span",{className:"flex items-center",children:(0,s.jsx)(N.Z,{defaultMessage:"Log out",id:"PlBReUqqzW"})})})})]})})}let ep=()=>{let{account:e}=(0,n.t)(),t=(0,b.useMemo)(()=>{var t;return null!==(t=null==e?void 0:e.memberships.map(e=>e.organization))&&void 0!==t?t:[]},[e]),a=(0,b.useMemo)(()=>es()(t.filter(e=>e.capabilities.includes("chat")),e=>!e.capabilities.includes("raven"),"name"),[t]),i=a.some(e=>e.capabilities.includes("raven"));return(0,s.jsx)(s.Fragment,{children:e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(J.HF,{className:"text-sm pb-2 overflow-ellipsis truncate",children:null==e?void 0:e.email_address}),a.map(e=>(0,s.jsx)(ev,{org:e,hasTeam:i},e.uuid))]})})},ev=e=>{let{org:t,hasTeam:a}=e,i=(0,C.Z)(),{switchAndRefresh:l}=(0,H.z6)(),{activeOrganization:r}=(0,n.t)(),o=(0,n.gQ)(t),c=(0,_.usePathname)(),d=o?"Enterprise":t.capabilities.includes("raven")?"Team":t.capabilities.includes("claude_pro")?"Pro":t.capabilities.includes("claude_max")?"Max":"Free",u=t.uuid===(null==r?void 0:r.uuid),x=t.capabilities.includes("raven")?t.name:i.formatMessage({defaultMessage:"Personal",id:"NDx+B0BTac"}),m=(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:(0,p.Z)("flex items-center gap-2 w-full",u?"cursor-default":"cursor-pointer"),children:[(0,s.jsx)(ej,{org:t}),(0,s.jsxs)("div",{className:"flex flex-col overflow-hidden grow",children:[(0,s.jsx)("span",{className:"truncate text-text-100 text-sm",children:x}),(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsx)("span",{className:"text-text-300",children:(0,s.jsx)(N.Z,{defaultMessage:"{plan} plan",id:"oK+PGPHfhv",values:{plan:d}})}),"Free"===d&&u&&a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)($.o,{size:12,className:"inline"}),(0,s.jsx)(y.default,{href:"/upgrade",className:"text-text-000 hover font-medium transition-all",children:(0,s.jsx)(N.Z,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})]})]})]}),u&&(0,s.jsx)(ee.J,{weight:"bold",className:"flex-shrink-0 text-accent-secondary-100 h-4 w-4"})]})});return u?(0,s.jsx)(J.AZ,{children:m}):(0,s.jsx)(J.hP,{onSelect:()=>{c.startsWith("/chat/")?l(t.uuid,"/chats"):l(t.uuid)},children:m})},ej=e=>{let{org:t}=e,a=t.capabilities.includes("raven"),n=a?(0,s.jsx)(et.$,{size:16}):(0,s.jsx)(B.M,{size:"sm",variant:"cardamom"});return(0,s.jsx)("div",{className:(0,p.Z)("flex-shrink-0 flex h-7 w-7 items-center justify-center rounded-full bg-bg-400 text-text-300",a&&"rounded-sm"),children:n})},ey=e=>{let{name:t,path:a}=e,{websiteBaseUrl:n}=(0,Y.mX)();return(0,s.jsx)(J.hP,{asChild:!0,children:(0,s.jsx)(y.default,{href:"".concat(n).concat(a),target:"_blank",className:"text-sm",children:(0,s.jsxs)("span",{className:"flex items-center justify-between w-full",children:[(0,s.jsx)("span",{children:t}),(0,s.jsx)(eh,{})]})})})};V.q.div(ef());var eb=a(29670),eC=a(8905),eN=a(71042),ew=a(58183),e_=a(77003),eM=a(18780),ek=a(32559),eS=a(51866),eZ=a(64791);function ez(e){let{type:t,href:a,CustomIcon:n,onClick:i=()=>void 0,children:o,tooltipContent:c,isExpanded:d,uuid:u,size:x="default",conversation:m,className:f,isActive:h}=e,g=(0,_.usePathname)(),v=void 0!==h?h(g):g===a&&"more"!==t&&"promo"!==t,[j,y]=(0,b.useState)(!1),{closeSidebarOnMobile:C,isMobile:N}=(0,en.S)(),{data:w}=(0,ek.Yc)("project"===t?u:void 0);return(0,s.jsx)(r.u,{delayDuration:0,disableHoverableContent:!0,tooltipContent:!d&&!N&&c,side:"right",children:(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)(l.z,{"aria-label":c,href:a,onLinkClick:e=>{i(e),C()},variant:"ghost",size:x,className:(0,p.Z)(v&&"!bg-bg-400","promo"===t?"w-full overflow-hidden !min-w-0 group px-4 hover:!bg-transparent active:!bg-transparent":"w-full hover:bg-bg-300 overflow-hidden !min-w-0 group active:bg-bg-400 active:scale-[0.99] px-4",f),children:(0,s.jsxs)("div",{className:"-translate-x-2 w-full flex flex-row items-center justify-start gap-3",children:[n&&(0,s.jsx)("div",{className:"size-4 flex items-center justify-center group-hover:!text-text-200 text-text-400",children:n}),"more"===t&&(0,s.jsx)(eM.i,{size:18,className:"shrink-0 "}),(0,s.jsx)("span",{className:(0,p.Z)("truncate group-hover:[mask-image:linear-gradient(to_right,hsl(var(--always-black))_78%,transparent_95%)] group-focus-within:[mask-image:linear-gradient(to_right,hsl(var(--always-black))_78%,transparent_95%)] text-sm whitespace-nowrap w-full [mask-size:100%_100%]",(j||v)&&"[mask-image:linear-gradient(to_right,hsl(var(--always-black))_78%,transparent_95%)]"),children:o})]})}),(v||j||!N)&&(0,s.jsx)("div",{className:(0,p.Z)("absolute right-0 top-1/2 -translate-y-1/2",j||v?"block":"hidden group-hover:block group-focus-within:block"),children:u?"chat"===t&&m?(0,s.jsx)(eS.p,{conversation:m,initialName:m.name,open:j,onOpenChange:y,trigger:(0,s.jsx)(l.z,{variant:"ghost",className:"active:!scale-100 aria-expanded:!bg-bg-400",size:"icon_sm",onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,s.jsx)(e_.x,{weight:"bold",size:20})})}):"project"===t?w?(0,s.jsx)(eZ.j,{project:w,iconSize:20,buttonSize:"icon_sm",open:j,onOpenChange:y}):null:void 0:null})]})})}let eE=(0,b.forwardRef)((e,t)=>{let{isExpanded:a,setIsHidden:n}=e,{track:i}=(0,Q.z$)(),l=(0,b.useMemo)(()=>({win_four_months_max:(0,s.jsx)(N.Z,{defaultMessage:"Win 4 months of Max",id:"sTHRUu15q1"}),get_four_months_max_free:(0,s.jsx)(N.Z,{defaultMessage:"Get 4 months of Max free",id:"erNk86QqJj"}),get_four_months_claude:(0,s.jsx)(N.Z,{defaultMessage:"Get 4 months of Claude 4",id:"CKVjmAKCts"})}),[]),r=(0,ew.useExperiment)("invite_contest_sidebar_text").get("text_variant","win_four_months_max"),o=(0,b.useCallback)(()=>{i({event_key:"claudeai.invite_contest.clicked",experiment_variant:r})},[i,r]),c=(0,b.useCallback)(e=>{e.stopPropagation(),localStorage.setItem("hideInviteContestLink","true"),n(!0),i({event_key:"claudeai.invite_contest.dismissed",experiment_variant:r})},[i,r,n]),d=l[r];return(0,s.jsxs)("div",{ref:t,className:"relative group",children:[(0,s.jsx)("div",{className:"absolute inset-0 border border-accent-secondary-200/20 group-hover:border-accent-secondary-200/40 rounded-lg pointer-events-none z-0 transition-colors duration-200"}),(0,s.jsx)(ez,{CustomIcon:(0,s.jsx)(eN.n,{size:18,className:"text-accent-secondary-100 group-hover:text-accent-secondary-200 transition-colors duration-200"}),href:"/invite",type:"promo",isExpanded:a,onClick:o,children:(0,s.jsx)("span",{className:"font-normal text-sm text-accent-secondary-100 group-hover:text-accent-secondary-000 transition-colors duration-200 pl-1.5 flex-1",children:d})}),a&&(0,s.jsx)("button",{onClick:c,className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 text-text-300 hover:text-text-000 transition-opacity duration-200 p-1 z-20",children:(0,s.jsx)(R.X,{size:16})})]})});function eP(e){var t;let{isExpanded:a}=e,{value:n}=(0,f.FL)("claude_ai_invite_contest"),i=(0,b.useRef)(null),{isMobile:r}=(0,en.S)(),{ipCountry:o}=(0,Y.mX)(),{fiveXPricing:c,fetchAllPricing:d}=(0,eC.XO)({perBillingPeriod:!0}),[u,x]=(0,b.useState)(()=>"true"===localStorage.getItem("hideInviteContestLink"));if((0,b.useEffect)(()=>{o&&n&&!u&&d({address:{country:o}})},[o,n,u,d]),(0,b.useEffect)(()=>{let e=()=>{var e;null===(e=i.current)||void 0===e||e.openIfNotSeen()};return window.addEventListener("firstClaudeMessage",e),()=>{window.removeEventListener("firstClaudeMessage",e)}},[]),!n||u)return null;let m=(null==c?void 0:null===(t=c.price)||void 0===t?void 0:t.basePrice)?4*c.price.basePrice:null,h=m&&(null==c?void 0:c.currency)?(0,eb.xG)(m,c.currency,{preferWholeNumber:!0}):"$400",g=r?(0,s.jsx)(eE,{isExpanded:a,setIsHidden:x}):(0,s.jsxs)(W,{popoverKey:"invite-contest",ref:i,autoShowOnMount:!1,trigger:(0,s.jsx)(eE,{isExpanded:a,setIsHidden:x}),side:"right",sideOffset:16,align:"end",alignOffset:-16,closeButton:"absolute",children:[(0,s.jsx)("div",{className:"py-4 mb-2 rounded-md bg-[#CBCADB] flex justify-center items-center",children:(0,s.jsx)(j.default,{src:"/images/giftbox-white.svg",alt:"Gift Box",width:120,height:120})}),(0,s.jsxs)("div",{className:"px-1.5 py-1.5",children:[(0,s.jsx)("h2",{className:"text-sm font-medium text-text-100 mb-1.5",children:(0,s.jsx)(N.Z,{defaultMessage:"Win 4 months of Claude 4",id:"11xRu8cUR8"})}),(0,s.jsx)("p",{className:"text-sm text-text-100 mb-3",children:(0,s.jsx)(N.Z,{defaultMessage:"Share your invite link to win a chance at 4 months of Max plan ({value} in value)!",id:"iJDgr6HMht",values:{value:h}})}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(l.z,{href:"/invite",className:"inline-block ",children:(0,s.jsx)(N.Z,{defaultMessage:"Share link",id:"GQNYobJbtO"})})})]})]});return(0,s.jsx)(v.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,ease:"easeOut"},className:a?"px-2 py-2":"px-2 pb-2",children:g})}eE.displayName="InviteContestNavItem";var eO=a(28803),eT=a(8927);function eI(e){let{offset:t,className:a}=e,{track:n}=(0,Q.z$)(),[i,l]=(0,b.useState)(!1),{data:r,isLoading:o}=(0,eO.QR)({limit:eO.V0,starred:!1}),{data:c}=(0,eO.m)();if((0,b.useEffect)(()=>{!o&&(null==r?void 0:r.length)&&l(!0)},[o,r]),!o&&(null==r?void 0:r.length))return(0,s.jsxs)("div",{className:"flex flex-col ",children:[(0,s.jsx)("h3",{className:(0,p.Z)("text-text-300 pb-2 mt-1 text-xs select-none",t,a),children:(0,s.jsx)(N.Z,{defaultMessage:"Recents",id:"wA4FIMmtlS"})}),(0,s.jsx)("ul",{className:"flex flex-col gap-px",children:(0,s.jsx)(eT.M,{children:r.map(e=>(0,s.jsx)(v.E.li,{initial:{opacity:0,height:i?0:"auto"},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:(0,s.jsx)(ez,{href:"/chat/".concat(e.uuid),type:"chat",uuid:e.uuid,size:"sm",onClick:()=>{n({event_key:"claudeai.conversation.recent.opened",conversation_uuid:e.uuid})},conversation:e,children:e.name?e.name:(0,s.jsx)("span",{className:"opacity-60",children:(0,s.jsx)(N.Z,{defaultMessage:"Untitled",id:"3kbIhS7KZS"})})})},e.uuid))})}),c&&c.count>=eO.V0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ez,{size:"sm",type:"more",href:"/recents",children:(0,s.jsx)(N.Z,{defaultMessage:"All chats",id:"Ug9lgdRJy3"})}),(0,s.jsx)("div",{className:"bg-gradient-to-t from-bg-200 to-transparent sticky h-4 bottom-0 left-0 right-0"})]})]})}function eL(e){let{offset:t,className:a}=e,[n,i]=(0,b.useState)(!1),l=(0,O.U)(),{data:r,isLoading:o}=(0,ek.O3)({enabled:!0,starred:!0,limit:ek.oS}),{data:c,isLoading:d}=(0,eO.QR)({starred:!0,limit:eO.V0}),x=l&&o||d;if((0,b.useEffect)(()=>{x||i(!0)},[x]),x)return;let m=null!=c?c:[],f=null!=r?r:[];return(null==f?void 0:f.length)||(null==m?void 0:m.length)?(0,s.jsxs)("div",{className:"flex flex-col mb-6",children:[(0,s.jsx)("h3",{className:(0,p.Z)("text-text-300 flex items-center gap-1.5 text-xs pb-2 select-none",t,a),children:(0,s.jsx)(N.Z,{defaultMessage:"Starred",id:"V7cUPvWFo3"})}),(0,s.jsx)("ul",{className:"-mx-1.5 flex flex-1 flex-col px-1.5 gap-px",children:(0,s.jsxs)(eT.M,{children:[f.map(e=>(0,s.jsx)(v.E.li,{initial:{opacity:0,height:n?0:"auto"},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:(0,s.jsx)(ez,{type:"project",href:"/project/".concat(e.uuid),uuid:e.uuid,size:"sm",CustomIcon:(0,s.jsx)(u,{size:18}),children:e.name})},e.uuid)),m.map(e=>(0,s.jsx)(v.E.li,{initial:{opacity:0,height:n?0:"auto"},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:(0,s.jsx)(ez,{type:"chat",href:"/chat/".concat(e.uuid),uuid:e.uuid,size:"sm",conversation:e,children:e.name?e.name:(0,s.jsx)("span",{className:"opacity-60",children:(0,s.jsx)(N.Z,{defaultMessage:"Untitled",id:"3kbIhS7KZS"})})})},e.uuid))]})})]}):null}var eR=a(68571);let eA="18rem",eD=49;function eU(){let{account:e,activeOrganization:t}=(0,n.t)(),a=(0,C.Z)(),r=(0,O.U)(),[c,x]=(0,b.useState)(!1),{isExpanded:f,setIsExpanded:w,closeSidebarOnMobile:_,isMobile:M}=(0,en.S)(),k=(0,h.Q)(m.t6),S=(0,b.useRef)(null),Z=M||k?"0":"3.05rem",z=(0,p.Z)(f?"":"opacity-0 -translate-x-0.5","transition-all duration-200"),E=(0,b.useMemo)(()=>({collapsed:{width:Z,transition:{type:"spring",stiffness:950,damping:52,mass:1}},expanded:{width:eA,transition:{type:"spring",stiffness:900,damping:52,mass:1}}}),[Z]),L=null==t?void 0:t.capabilities.includes("raven"),R=null==t?void 0:t.capabilities.includes("claude_pro"),A=null==t?void 0:t.capabilities.includes("claude_max");(0,I.i7)();let D=(0,T.k)(),U=(0,s.jsx)(l.z,{variant:"ghost",className:(0,p.Z)("flex !justify-start !min-w-0 py-5 !px-0.5  w-full",!f&&"hover:!bg-transparent active:!bg-transparent"),"data-testid":"user-menu-button",children:(0,s.jsxs)("div",{className:"flex flex-row flex-grow items-center gap-3 pointer-cursor w-full",children:[t&&(0,s.jsx)(ej,{org:t}),(0,s.jsxs)("div",{className:(0,p.Z)(z,"flex w-full text-sm justify-between items-center font-medium"),children:[(0,s.jsxs)("div",{className:"flex flex-col items-start w-full max-w-full overflow-hidden pr-4",children:[(0,s.jsx)("div",{className:"w-full max-w-full overflow-hidden",children:(0,s.jsx)("span",{className:"text-start block truncate",children:null==e?void 0:e.full_name})}),(0,s.jsx)("span",{className:"text-xs text-text-300 font-normal",children:L?null==t?void 0:t.name:R?(0,s.jsx)(N.Z,{defaultMessage:"Pro plan",id:"P0xe8AvKVP"}):A?(0,s.jsx)(N.Z,{defaultMessage:"Max plan",id:"yC6ECfKPIQ"}):(0,s.jsx)(N.Z,{defaultMessage:"Free plan",id:"B+7815cfpz"})})]}),(0,s.jsx)(g.p,{className:"flex-shrink-0 mr-2",size:14})]})]})});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P,{}),(0,s.jsx)(v.E.div,{animate:f?"expanded":"collapsed",style:{width:f?eA:Z},className:"fixed z-sidebar lg:sticky",children:(0,s.jsxs)(v.E.nav,{variants:E,initial:!1,animate:f?"expanded":"collapsed",className:(0,p.Z)("h-screen flex flex-col gap-3 pb-2 px-0 fixed top-0 left-0 transition duration-100 border-border-300 border-r-0.5",f&&"shadow-lg !bg-bg-200 lg:shadow-[inset_-4px_0px_6px_-4px_hsl(var(--always-black)/4%)]",c&&"!bg-bg-200"),"aria-label":a.formatMessage({defaultMessage:"Sidebar",id:"JZy6joR+Wk"}),children:[(0,s.jsxs)("div",{className:(0,p.Z)("flex w-full items-center gap-px p-2",k&&"pl-[90px] pt-3 draggable min-w-fit"),children:[(0,s.jsx)(l.z,{variant:"ghost",size:"icon_sm",onClick:()=>w(!f),className:"group","data-testid":"pin-sidebar-toggle","aria-label":a.formatMessage({defaultMessage:"Sidebar",id:"JZy6joR+Wk"}),"aria-expanded":f,"aria-haspopup":"menu",children:(0,s.jsxs)("div",{className:"relative *:duration-300 ",children:[(0,s.jsx)(o.aK,{className:(0,p.Z)(!k&&[M&&f&&"!opacity-0 scale-80",c&&!M?"opacity-0 scale-80":"opacity-100 scale-100","group-hover:opacity-0"],"group-hover:scale-80 transition-all text-text-300"),size:18}),!k&&(f?(0,s.jsx)(o.G3,{className:(0,p.Z)(M&&f&&"!opacity-100 !scale-100",c?"opacity-100 scale-100":"opacity-0 scale-50","absolute inset-0 group-hover:scale-100 group-hover:opacity-100 transition-all text-text-200"),size:18}):(0,s.jsx)(o.NY,{className:(0,p.Z)(c&&!M?"opacity-100 scale-100":"opacity-0 scale-50","absolute inset-0 group-hover:scale-100 group-hover:opacity-100 transition-all text-text-200"),size:18}))]})}),!k&&f&&(0,s.jsx)(y.default,{href:"/new",className:"flex flex-col justify-start items-top","aria-label":a.formatMessage({defaultMessage:"Home",id:"ejEGdxSUGs"}),children:(0,s.jsx)(i.l,{className:"ml-[3px] h-4 flex-shrink-0 text-text-100"})})]}),(0,s.jsxs)("div",{className:(0,p.Z)("flex flex-col align-center h-full overflow-hidden",M&&z),children:[(0,s.jsxs)("div",{className:"flex flex-col px-2 pt-1 gap-px mb-6",children:[(0,s.jsx)("div",{className:"mb-1",children:(0,s.jsx)(eF,{hideOnCollapse:z,isExpanded:f,closeSidebarOnMobile:_,isMobile:M})}),null,(0,s.jsx)(ez,{CustomIcon:(0,s.jsx)(d,{size:18}),href:"/recents",tooltipContent:a.formatMessage({defaultMessage:"Chats",id:"ABAQyoD6zr"}),isExpanded:f,children:(0,s.jsx)("div",{className:z,children:(0,s.jsx)(N.Z,{defaultMessage:"Chats",id:"ABAQyoD6zr"})})}),r&&(0,s.jsx)(ez,{CustomIcon:(0,s.jsx)(u,{size:18}),href:"/projects",tooltipContent:a.formatMessage({defaultMessage:"Projects",id:"UxTJRaKagI"}),isExpanded:f,children:(0,s.jsx)("div",{className:z,children:(0,s.jsx)(N.Z,{defaultMessage:"Projects",id:"UxTJRaKagI"})})}),D&&(0,s.jsxs)(W,{className:z,popoverKey:"artifacts-studio",ref:S,trigger:e=>(0,s.jsx)("div",{children:(0,s.jsx)(ez,{CustomIcon:(0,s.jsx)(o.Qs,{size:18}),href:"/artifacts",tooltipContent:a.formatMessage({defaultMessage:"Artifacts",id:"eW5eoWkxy3"}),isExpanded:f,onClick:()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.close()},isActive:e=>e.startsWith("/artifacts"),children:(0,s.jsxs)("div",{className:(0,p.Z)(z,"flex items-center gap-2"),children:[(0,s.jsx)(N.Z,{defaultMessage:"Artifacts",id:"eW5eoWkxy3"}),e&&(0,s.jsx)(eW,{})]})})}),closeButton:"absolute",side:M?"bottom":"right",align:"start",alignOffset:-16,sideOffset:16,children:[(0,s.jsx)(j.default,{src:"/images/popovers/artifacts.png",width:876,height:460,alt:"Artifact",className:"mb-2 rounded-md"}),(0,s.jsxs)("div",{className:"px-1.5 py-1.5",children:[(0,s.jsx)("h2",{className:"text-sm font-medium text-text-100 mb-1.5",children:(0,s.jsx)(N.Z,{defaultMessage:"Create interactive artifacts",id:"Oc0ITh8OK8"})}),(0,s.jsx)("p",{className:"text-sm text-text-100",children:(0,s.jsx)(N.Z,{defaultMessage:"Inspire, customize, and build your own collection of games, tools, templates, and apps.",id:"vb72ANSVeX"})}),(0,s.jsx)("div",{className:"flex items-center justify-end mt-3",children:(0,s.jsx)(l.z,{variant:"secondary",size:"sm",onClick:()=>{var e;null===(e=S.current)||void 0===e||e.close()},children:(0,s.jsx)(N.Z,{id:"TDaF6JVgG6",defaultMessage:"Dismiss"})})})]})]}),""]}),(0,s.jsxs)("div",{className:(0,p.Z)(z,"flex flex-grow flex-col overflow-y-auto overflow-x-hidden relative px-2 mb-2"),children:[(0,s.jsx)(eL,{offset:"pl-2",className:(0,p.Z)("sticky top-0 z-10 bg-gradient-to-b from-bg-200 from-50% to-bg-200/40",!f&&"pointer-events-none")}),null,(0,s.jsx)(eI,{offset:"pl-2",className:(0,p.Z)("sticky top-0 z-10 bg-gradient-to-b from-bg-200 from-50% to-bg-200/40",!f&&"pointer-events-none")}),(0,s.jsx)("div",{className:(0,p.Z)("h-full w-full cursor-pointer absolute top-0 z-sidebar",f&&"hidden"),onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),onClick:()=>!M&&w(!f)})]}),!eR.env.NEXT_PUBLIC_HIDE_UPSELLS&&(0,s.jsx)(eP,{isExpanded:f}),(0,s.jsx)("div",{className:"px-2 pb-1",children:(0,s.jsx)(eg,{trigger:U,matchTriggerWidth:!1,className:"w-[17rem] mx-2"})})]})]})}),f&&M&&(0,s.jsx)("div",{className:"fixed bg-transparent z-sidebar top-0 bottom-0 right-0",style:{left:eA},onClick:_})]})}function eF(e){let{isExpanded:t,hideOnCollapse:a,closeSidebarOnMobile:n,isMobile:i}=e,c=(0,C.Z)(),d=(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)(N.Z,{defaultMessage:"New chat",id:"ATDyLPIoxz"})}),(0,s.jsx)("span",{className:"text-xs opacity-80",children:(0,x.V5)()?(0,s.jsx)(N.Z,{defaultMessage:"âŒ˜K",id:"cpOWpzUZLg"}):(0,s.jsx)(N.Z,{defaultMessage:"Ctrl+K",id:"ps5nD4m+km"})})]});return(0,s.jsx)(r.u,{delayDuration:0,side:"right",tooltipContent:!t&&!i&&d,disableHoverableContent:!0,children:(0,s.jsx)("div",{children:(0,s.jsx)(l.z,{"aria-label":c.formatMessage({id:"ATDyLPIoxz",defaultMessage:"New chat"}),role:"link",variant:"unstyled",href:"/new",onLinkClick:n,className:(0,p.Z)("group transition ease-in-out active:!scale-100 hover:bg-transparent flex !justify-start !min-w-0 w-full",t&&"hover:!bg-accent-main-000/[0.08] active:!bg-accent-brand/15"),children:(0,s.jsxs)("div",{className:"-mx-2 flex flex-row items-center gap-3",children:[(0,s.jsx)("div",{className:"size-4 flex items-center justify-center",children:(0,s.jsx)("div",{className:"p-1.5 group-active:!scale-[0.98] group-active:!shadow-none group-active:bg-accent-main-200 group-hover:-rotate-2 group-hover:scale-105 group-active:rotate-3 rounded-full transition-all ease-in-out bg-accent-main-000 group-hover:shadow-md",children:(0,s.jsx)(o.yc,{size:12,className:"group-hover:scale-105 transition text-always-white"})})}),(0,s.jsx)("div",{className:(0,p.Z)(a,"text-accent-main-100 font-medium text-sm"),children:(0,s.jsx)(N.Z,{defaultMessage:"New chat",id:"ATDyLPIoxz"})})]})})})})}function eW(){return(0,s.jsxs)("span",{className:"relative flex size-2",children:[(0,s.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-accent-secondary-100 opacity-75"}),(0,s.jsx)("span",{className:"relative inline-flex size-2 rounded-full bg-accent-secondary-100"})]})}},8322:function(e,t,a){a.d(t,{K5:function(){return C},Ql:function(){return S},Z1:function(){return k},_A:function(){return w},nJ:function(){return _},rN:function(){return N},wy:function(){return M},z6:function(){return y}});var s=a(36091),n=a(8571),i=a(40287),l=a(27218),r=a(27895),o=a(18850),c=a(78664),d=a(35228),u=a(6385),x=a(13262);a(92841);var m=a(87033),f=a(77930),h=a(81695),g=a(7653),p=a(19170),v=a(93513),j=a(68571);let y=()=>{let e=(0,h.useRouter)(),t=(0,i.f)();return{refresh:()=>{e.refresh()},switchAndRefresh:(e,a)=>{t.set(u.cn.LAST_ACTIVE_ORG,e),a?location.pathname=a:location.reload()}}},b=e=>{let{account:t}=(0,l.t)(),a=(0,c.gt)(e),n=(0,s.Wc)(),{value:i}=(0,m.FL)("age_gate_reverification");return((0,g.useEffect)(()=>{t&&n()},[t,n]),t&&((0,d.wJ)({account:t,isClaudeDot:e})||(0,d.c6)(t,e)))?"/onboarding":t&&(0,d.IC)(t,e,i)?"/age-verification":t&&(0,d.kK)(t,e)?"/invites":t&&(0,d.D_)(t,e)?"/create":t&&a?"/upgrade":e?"/new":"/dashboard"};function C(e){let{value:t}=(0,m.FL)("show_affirmative_consent"),{value:a}=(0,m.FL)("show_affirmative_consent_for_privacy_policy");return(0,g.useMemo)(()=>[...t===e?["aup","consumer-terms"]:[],...a===e?["privacy"]:[]],[a,t,e])}let N=(e,t,a)=>{let s=(0,o.q)(),{mutateAsync:n}=(0,p.k7)();return(0,g.useCallback)(async()=>{if(!e||!s||0===t.length)return;let i=t.map(e=>({document_id:"v3:".concat(e,":").concat(s[e]),accepted_via_checkbox:a}));await n({acceptances:i})},[e,s,t,n,a])},w=(e,t)=>{let{account:a,refetch:s,setActiveOrganizationUUID:n}=(0,l.t)(),[i,o]=(0,g.useState)(!1),[c,d]=(0,g.useState)(!1),u=_(),{addSuccess:m}=(0,r.e)(),{data:h}=(0,p.gq)(e),v=(0,f.useQueryClient)();return(0,g.useEffect)(()=>{a&&i&&c&&(t?t(u):u())},[c,u,i,a,t]),(0,g.useCallback)(async()=>{var e,t;o(!0);let a=await s();await v.invalidateQueries({queryKey:[x.eW]}),(null==h?void 0:h.organization_uuid)&&(n(h.organization_uuid),m("Successfully joined ".concat(h.organization_name))),a&&(null===(t=window.google)||void 0===t?void 0:null===(e=t.accounts)||void 0===e?void 0:e.id)&&window.google.accounts.id.cancel(),d(!0)},[h,m,s,n,v])},_=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,h.useSearchParams)().get("returnTo"),a=M(e);return(0,g.useCallback)(()=>{a(t)},[a,t])},M=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{account:t}=(0,l.t)(),[a,s]=(0,g.useState)(!1),i=(0,h.useRouter)(),[r,o]=(0,g.useState)(null),c=(0,h.usePathname)(),d=(0,h.useSearchParams)(),u=(0,n.Zx)(),x=b(u);return(0,g.useEffect)(()=>{(a||e)&&!t&&i.push((0,v.C2)(c,d.toString()))},[t,i,a,e,c,d]),(0,g.useEffect)(()=>{if(a&&t){let e=(0,v.eX)(t,r,x,u,!!j.env.NEXT_PUBLIC_SHOW_US_GOVT_SYSTEM_USE_NOTIFICATION);e!==window.location.href.replace(window.location.origin,"")&&(i.push(e),i.refresh())}},[t,i,a,r,x,u]),(0,g.useCallback)(e=>{e&&o(decodeURIComponent(e)),s(!0)},[])};function k(){let[e,t]=(0,g.useState)(!1);return{getRecaptchaToken:(0,g.useCallback)(async(e,a)=>j.env.NEXT_PUBLIC_DISABLE_RECAPTCHA?Promise.resolve("recaptcha-ignore-token"):(t(!0),new Promise((s,n)=>{if("undefined"==typeof grecaptcha)return t(!1),n(Error("Recaptcha failed to load"));grecaptcha.enterprise.ready(()=>{grecaptcha.enterprise.execute(e,{action:a}).then(e=>{s(e),t(!1)},e=>{t(!1),n(e)})})})),[]),isLoading:e}}function S(e){let[t,a]=(0,g.useState)(!1);(0,g.useEffect)(()=>{if(!t){let t=setInterval(()=>{(window.grecaptcha||j.env.NEXT_PUBLIC_DISABLE_RECAPTCHA)&&(a(!0),e())},10);return()=>clearInterval(t)}},[t,a,e])}},93513:function(e,t,a){a.d(t,{$6:function(){return o},C2:function(){return l},G9:function(){return r},eX:function(){return i},kY:function(){return c}});var s=a(35228),n=a(6385);let i=(e,t,a,i,l)=>{if(l&&!localStorage.getItem(n.VJ.ACCEPTED_US_GOVERNMENT_SYSTEM_NOTIFICATION))return"/us-govt-system-warning";if(!t||!t.startsWith("/"))return a;if((0,s.cG)(e,i)){let e=new URL(a,window.location.origin),s=new URLSearchParams(e.search);return s.set("returnTo",t),"".concat(e.pathname,"?").concat(s.toString())}return r(t)},l=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/login",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n="".concat(e,"?").concat(t),i=new URLSearchParams(s);return i.append("returnTo",n),"".concat(a,"?").concat(i.toString())};function r(e){let t=new URL(e,"http://example.com");return t.pathname.replace(/^\/+/,"/")+t.search}function o(e){return e.reduce((e,t)=>{let a=localStorage.getItem(t);return null!==a&&e.push([t,a]),e},[])}function c(e){e.forEach(e=>{let[t,a]=e;localStorage.setItem(t,a)})}},36091:function(e,t,a){a.d(t,{ArkoseTokenProvider:function(){return p},Wc:function(){return j},mj:function(){return v}});var s=a(27573),n=a(5362),i=a(87033),l=a(88755),r=a(45144),o=a(27522),c=a(7653),d=a(41270),u=a(8571),x=a(18013);let m="ak-session-token",f=e=>{let{host:t,apiKey:a,nonce:n,onCompleted:l,onShown:u,onShow:x,onHide:m,onError:f,setArkoseEnforcement:h}=e,g=e=>{e.setConfig({onCompleted:l,onShown:u,onShow:x,onHide:m,onError:f}),h(e)};(0,c.useEffect)(()=>()=>{window.setupEnforcement=void 0},[]);let p=(0,i.Zr)("ak_integrity","integrity","",d.z.string());return(0,s.jsx)(o.default,{id:"arkose-script",src:"https://".concat(t,"/v2/").concat(a,"/api.js"),type:"text/javascript","data-callback":"setupEnforcement",async:!0,defer:!0,onLoad:()=>{window.setupEnforcement||(window.setupEnforcement=g)},onError:e=>(0,r.Tb)(e),nonce:n,integrity:p,crossOrigin:"anonymous"})},h=()=>{let e=(0,l.Q)(),t=(0,u.Zx)(),{value:a}=(0,i.FL)("ak_enabled");return!e&&t&&a},g=(0,c.createContext)({isReady:!1,isChallenging:!1,lastCallerId:void 0,needsToken:!1,startTokenFlow:()=>{}});function p(e){let{host:t,apiKey:a,nonce:n,children:i}=e,l=h(),[o,d]=(0,c.useState)(void 0),[u,p]=(0,c.useState)(void 0),[v,j]=(0,c.useState)(!1),[y,b]=(0,x.R)(m,void 0),C=l&&!y&&!!t&&!!a;return(0,s.jsxs)(g.Provider,{value:{isReady:!!o,isChallenging:v,needsToken:C,lastCallerId:u,startTokenFlow:e=>{p(e),null==o||o.run()}},children:[i,l&&t&&a&&(0,s.jsx)(f,{host:t,apiKey:a,nonce:n,onCompleted:e=>{b(e.token)},onShown:()=>j(!0),onShow:()=>j(!0),onHide:()=>j(!1),onError:e=>{(0,r.Tb)(e.error)},setArkoseEnforcement:d})]})}function v(){return(0,c.useContext)(g)}let j=()=>{let e=h(),[t,a,s]=(0,x.R)(m,void 0),{mutateAsync:i}=(0,n.uC)("api/arkose/verify","POST");return(0,c.useCallback)(async()=>{e&&t&&(s(),await i({session_token:t}))},[e,i,t,s])}},20823:function(e,t,a){a.d(t,{IntercomProvider:function(){return i},o:function(){return l}});var s=a(27573),n=a(66606);function i(e){let{children:t,...a}=e;return(0,s.jsx)(n.H,{...a,children:t})}function l(){return(0,n.o)()}},18850:function(e,t,a){a.d(t,{LegalDocsProvider:function(){return l},q:function(){return r}});var s=a(27573),n=a(7653);let i=(0,n.createContext)(void 0),l=e=>{let{value:t,children:a}=e;return(0,s.jsx)(i.Provider,{value:t,children:a})};function r(){return(0,n.useContext)(i)}},37891:function(e,t,a){a.d(t,{QD:function(){return s},pO:function(){return n},rK:function(){return i}});let s=["proMonthlyPromoCode","proAnnualPromoCode","welcomeMessageTitle","utmParams","max5xMonthlyPromoCode","max20xMonthlyPromoCode"],n=e=>{if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},i=(e,t)=>(null==t?void 0:t.overrides)?{...e,...t.overrides}:e},78664:function(e,t,a){a.d(t,{Iq:function(){return p},fk:function(){return h},gt:function(){return g},jN:function(){return f},s$:function(){return m}});var s=a(5362),n=a(40287),i=a(27895),l=a(6385),r=a(13262),o=a(87033),c=a(7653),d=a(40950),u=a(41270),x=a(37891);function m(){var e;let t=(0,n.f)(),a=null!==(e=t.get(l.cn.PROMOTION))&&void 0!==e?e:null;return{data:(0,x.pO)(a),mutate:(0,c.useCallback)(e=>{t.set(l.cn.PROMOTION,JSON.stringify(e),{maxAgeSeconds:7776e3})},[t]),delete:(0,c.useCallback)(()=>{t.delete(l.cn.PROMOTION)},[t])}}function f(){var e,t,a;let{data:n}=m(),i=(t=null!==(e=null==n?void 0:n.promotionId)&&void 0!==e?e:null,a=e=>(0,x.rK)(e,n),(0,s.WE)("/api/billing/promotion/".concat(t),{queryKey:[r.Lx,t],enabled:!!t,meta:{noToast:!0}},e=>(e.promotionId=t,a)?a(e):e));return{...i,isPending:i.isPending&&!!(null==n?void 0:n.promotionId)}}function h(){let{data:e,mutate:t}=m();(0,c.useEffect)(()=>{(null==e?void 0:e.needsCheckout)&&(e.needsCheckout=void 0,t(e))},[e,t])}function g(e){let{data:t,mutate:a}=m(),s=null==t?void 0:t.promotionId,n=(0,o.Zr)("claude_ai_targeted_promotion","promotionId",null,u.z.string().nullable());return(0,c.useEffect)(()=>{!s&&n&&a({promotionId:n})},[s,n,a]),!!e&&!!(null==t?void 0:t.needsCheckout)&&!!(null==t?void 0:t.promotionId)}let p=()=>{let e=(0,c.useRef)(!1),t=(0,i.e)(),a=(0,d.Z)(),{delete:s}=m();return(0,c.useCallback)(n=>{(null==n?void 0:n.offerError)&&!e.current&&(e.current=!0,t.addError(a.formatMessage({defaultMessage:"This promotion is not available for your account",id:"Vu9kt6ezVH"})),s())},[t,s,a])}},83617:function(e,t,a){a.d(t,{C:function(){return i}});var s=a(27573),n=a(10607);let i=e=>{let{color:t="default",size:a="default",children:i,className:l,uppercase:r}=e;return(0,s.jsx)("div",{className:(0,n.W)("inline-flex items-center align-middle leading-none","default"===t&&"bg-gradient-to-bl  from-bg-500/30  to-bg-500/70 text-text-300","flat"===t&&"bg-bg-500/40 text-text-200","secondary"===t&&"bg-accent-secondary-900/40 text-accent-secondary-200","pro"===t&&"bg-gradient-to-bl  from-accent-pro-200  to-accent-pro-100  text-oncolor-100","main"===t&&"bg-gradient-to-bl  from-accent-main-200/70  to-accent-main-100  text-oncolor-100","default"===a&&"h-5 px-1.5 rounded-md text-[0.625rem]","sm"===a&&"h-4 px-1 rounded text-[0.625rem]","lg"===a&&"h-6 px-2 rounded-lg text-xs",r&&"uppercase tracking-[0.015rem]",l),children:i})}},69069:function(e,t,a){a.d(t,{M:function(){return r}});var s=a(27573),n=a(27218),i=a(835);let l=e=>{var t,a,n;let{account:l,size:r,variant:o}=e,c=null!==(n=null!==(a=null!==(t=null==l?void 0:l.full_name)&&void 0!==t?t:null==l?void 0:l.display_name)&&void 0!==a?a:null==l?void 0:l.email_address)&&void 0!==n?n:"";return(0,s.jsx)(i.q,{name:c,size:r,variant:o})},r=e=>{let{size:t,variant:a}=e,{account:i}=(0,n.t)(),r=(0,n.ZJ)(),o=(0,n.ue)();return(0,s.jsx)(l,{account:i||null,size:t,variant:null!=a?a:r||o?"pro":"default"})}},45356:function(e,t,a){a.d(t,{U9:function(){return n}});let s={CLAUDE_E2E_TEST_ACCOUNT_REGEX:/^claude-[0-9]{16}(?:-[^-]+)?-e2e@sillylittleguy\.org$/,CONSOLE_E2E_TEST_ACCOUNT_REGEX:/^console-[0-9]{16}(?:-[^-]+)?-e2e@sillylittleguy\.org$/},n=e=>e.match(s.CONSOLE_E2E_TEST_ACCOUNT_REGEX)||e.match(s.CLAUDE_E2E_TEST_ACCOUNT_REGEX)}}]);