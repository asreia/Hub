# 圏論

## 基礎

- **圏**とは、**モノからモノへの関係性**を**射**で表現し、モノ(対象)の内部に付いては一切求言しない
  - 関係は、**推移律と反射率と結合律**を満たす
  - **矢印**が書ける所に**圏論を適用**できる余地があるかも知れない
- **関手**とは、圏の中の対象と射の繋がり方の構造を保って他の圏にマッピングする(関手で射(関数)を移す: fmap :: (a -> b) -> (f a -> f b))
  - Hom関手のpoint wise(ドメインの各点(x)毎に射(f,g)を定義する{(f + g)(x) = f(x) + g(x)})とリスト([])関手を考えると、**関手は対象**と考えることもできる
- **自然変換**とは、関手と関手の間の射を言い、関手のコドメインと関手のコドメインの間の射を全て集めたものを言う
- **関手圏**とは、対象を**関手**、射を**自然変換**とする圏で**Catの指数対象**でもある
- **随伴**とは、**2つの圏の射の対応関係**(自然同型)を互いに関手することで表す
- **同型**とは、A-(f)-> B、A <-(f')- B である時、f'○f = id、f○f = id になる時、fは同型射f'をその逆射と言う
  - 同型ならば区別できない
- **普遍性**とは、定義したい**対象とその射が普遍**である事を示すために、ある射を、定義したい射と他の射(普遍射)の合成により、ある射を**一意的に分解**(普遍射が唯一定まる)すると言う性質のこと
- **指数対象**とは、Hom集合をその**圏の中に埋め込む**(internalHomSet)もので、その関数の集合に**構造を入れる**(関数空間,point wise)とその**圏の対象にできる**
  - Hom_c(A,B)はSetsの対象だが、B^AはCの対象になる。(SetsではHom(A,B) == B^A(構造が無い))
  - [指数対象](https://youtu.be/gmVxVp2oLCw?list=PLzJWjr7AvxH37O6GPqx20NpF0HaSrndVc&t=222)
- **デカルト閉圏**とは、**任意の積**と**任意の指数対象**が存在する事。そして**任意の余積**が存在するならば**分配的**である
  - これによって**代数的データ型**(直積,直和)と、それを適用する**関数**(射(指数対象))を圏の対象にできる
    - Haskell: 積:(a,b) == a*b, 余積:Either a b == a+b, 射: a -> b == b^a
    例: ((a,b) -> c) -> a -> b -> c
- **Curry-Howard-Lambek対応**とは、証明できない型は書けない。直積:(a,b)をa∧b, 直和: Either a bをa∨b, 射: a -> bをa⇒b に対応させる
- **モナド**とは、
ある**型**(関手,文脈):**T** と、T型で二重(T^2)以上にラップされた型を**アンラップ**する関数(T^2->T,自然変換):**μ**(join) と、T型で**ラップ**する関数(I->T自然変換):**η**(return)
これら3つを合わせて**自己関手の圏におけるモノイド対象(モナド)**と言う。[プログラマのためのモナド入門](https://www.youtube.com/watch?v=fhuAlDPgi2Q)
プログラミングの文脈では**メソッドチェーン**の様なもの({.Func()}=={>>= KFunc}(**クライスリ射**(a -> m b),{(>>=) :: m a -> (a -> m b) -> m b}), {?.Func()(**Maybeモナド**)})

## 型の圏

- 代数的構造は直和と直積
  - **ポリモーフィズム**を**直和**、**複数のメンバ変数**と**複数の引数**を**直積**、と見ることもできる(ポリモーフィズムの直和は**型チェック**(❰is¦as❱)が必要)
  または、構造体は継承不可なので、メンバ変数の中のEnumで状態で場合分けする(直和)
- 代数的構造データ型 --(射(プログラム(関数)))--> 代数的構造データ型
  - 射(**関数**)を作るのは大変なので、関数を抽象化して**組み合わせる事で簡単**にする
  - 手続き型の場合、関数への入力が穴だらけなのでその全ての入力と出力を考慮する。
  - 手続き型言語ではデータの生成や変換と言う視点について役立つと思う
